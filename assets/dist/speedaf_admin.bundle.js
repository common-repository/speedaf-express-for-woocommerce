(()=>{var e={630:(e,t,n)=>{var a,o;window,a=[n(73)],void 0===(o=function(e){return function(e,t){var n={};n.btnEnum={ok:parseInt("0001",2),cancel:parseInt("0010",2),okcancel:parseInt("0011",2)},n.eventEnum={ok:1,cancel:2,close:3},n.typeEnum={info:"info",success:"success",error:"error",confirm:"confirm",warning:"warning",input:"input",custom:"custom"};t.extend({confirm:function(e,a,o){var i,r,s=n.btnEnum,d=n.eventEnum,c={info:{title:"信息",icon:"0 0",btn:s.ok},success:{title:"成功",icon:"0 -48px",btn:s.ok},error:{title:"错误",icon:"-48px -48px",btn:s.ok},confirm:{title:"提示",icon:"-48px 0",btn:s.okcancel},warning:{title:"警告",icon:"0 -96px",btn:s.okcancel},input:{title:"输入",icon:"",btn:s.ok},custom:{title:"",icon:"",btn:s.ok}},l=a?a instanceof Object?a:c[a]||{}:{},p=t.extend(!0,{title:"",icon:"",btn:s.ok,onOk:t.noop,onCancel:t.noop,onClose:t.noop},l,{okBtn:"Yes",cancelBtn:"Cancel"},o),m=t("<p>").html(e),u=t("<span>").addClass("tt").text(p.title),f=p.icon,h=f?t("<div>").addClass("bigIcon").css("backgroundPosition",f):"",g=p.btn,v=function e(){var n="pop_"+(new Date).getTime()+parseInt(1e5*Math.random());return t("#"+n).length>0?e():n}(),b=t("<div>").addClass("spf-confirm"),k=t("<div>").addClass("xc_layer"),y=t("<div>").addClass("popBox"),w=t("<div>").addClass("ttBox"),C=t("<div>").addClass("txtBox"),O=t("<div>").addClass("btnArea"),x=t("<a>").addClass("sgBtn").addClass("ok").text(p.okBtn),$=t("<a>").addClass("sgBtn").addClass("cancel").text(p.cancelBtn),D=t("<input>").addClass("inputBox"),_=t("<a>").addClass("clsBtn"),A={ok:x,cancel:$};function E(){t(this);var e=t.trim(D.val());D.is(":visible")?p.onOk(e):p.onOk(),t("#"+v).remove(),p.onClose(d.ok)}function B(){t(this),p.onCancel(),t("#"+v).remove(),p.onClose(d.cancel)}function T(){t("#"+v).remove(),p.onClose(d.close),t(window).unbind("keydown")}c.input===l&&m.append(D),y.append(w.append(_).append(u)).append(C.append(h).append(m)).append(O.append((i=g,r=t("<div>").addClass("btnGroup"),t.each(A,(function(e,t){s[e]==(i&s[e])&&r.append(t)})),r))),b.attr("id",v).append(k).append(y),t("body").append(b),x.click(E),t(window).bind("keydown",(function(e){13==e.keyCode&&1==t("#"+v).length&&E()})),$.click(B),_.click(T)}})}(0,e)}.apply(t,a))||(e.exports=o)},856:function(e,t,n){var a,o,i;i=this,a=[n(73)],o=function(e){return function(e,t){"use strict";var n,a,o,i="remodal",r=e.REMODAL_GLOBALS&&e.REMODAL_GLOBALS.NAMESPACE||i,s=t.map(["animationstart","webkitAnimationStart","MSAnimationStart","oAnimationStart"],(function(e){return e+"."+r})).join(" "),d=t.map(["animationend","webkitAnimationEnd","MSAnimationEnd","oAnimationEnd"],(function(e){return e+"."+r})).join(" "),c=t.extend({hashTracking:!0,closeOnConfirm:!0,closeOnCancel:!0,closeOnEscape:!0,closeOnOutsideClick:!0,modifier:"",appendTo:null},e.REMODAL_GLOBALS&&e.REMODAL_GLOBALS.DEFAULTS),l="closing",p="closed",m="opening",u="opened",f="confirmation",h="cancellation",g=void 0!==(o=document.createElement("div").style).animationName||void 0!==o.WebkitAnimationName||void 0!==o.MozAnimationName||void 0!==o.msAnimationName||void 0!==o.OAnimationName,v=/iPad|iPhone|iPod/.test(navigator.platform);function b(e){if(g&&"none"===e.css("animation-name")&&"none"===e.css("-webkit-animation-name")&&"none"===e.css("-moz-animation-name")&&"none"===e.css("-o-animation-name")&&"none"===e.css("-ms-animation-name"))return 0;var t,n,a,o,i=e.css("animation-duration")||e.css("-webkit-animation-duration")||e.css("-moz-animation-duration")||e.css("-o-animation-duration")||e.css("-ms-animation-duration")||"0s",r=e.css("animation-delay")||e.css("-webkit-animation-delay")||e.css("-moz-animation-delay")||e.css("-o-animation-delay")||e.css("-ms-animation-delay")||"0s",s=e.css("animation-iteration-count")||e.css("-webkit-animation-iteration-count")||e.css("-moz-animation-iteration-count")||e.css("-o-animation-iteration-count")||e.css("-ms-animation-iteration-count")||"1";for(i=i.split(", "),r=r.split(", "),s=s.split(", "),o=0,n=i.length,t=Number.NEGATIVE_INFINITY;o<n;o++)(a=parseFloat(i[o])*parseInt(s[o],10)+parseFloat(r[o]))>t&&(t=a);return t}function k(){if(t(document).height()<=t(window).height())return 0;var e,n,a=document.createElement("div"),o=document.createElement("div");return a.style.visibility="hidden",a.style.width="100px",document.body.appendChild(a),e=a.offsetWidth,a.style.overflow="scroll",o.style.width="100%",a.appendChild(o),n=o.offsetWidth,a.parentNode.removeChild(a),e-n}function y(){if(!v){var e,n,a=t("html"),o=x("is-locked");a.hasClass(o)&&(n=t(document.body),e=parseInt(n.css("padding-right"),10)-k(),n.css("padding-right",e+"px"),a.removeClass(o))}}function w(e,t,n,a){var o=x("is",t),i=[x("is",l),x("is",m),x("is",p),x("is",u)].join(" ");e.$bg.removeClass(i).addClass(o),e.$overlay.removeClass(i).addClass(o),e.$wrapper.removeClass(i).addClass(o),e.$modal.removeClass(i).addClass(o),e.state=t,!n&&e.$modal.trigger({type:t,reason:a},[{reason:a}])}function C(e,n,a){var o=0,i=function(e){e.target===this&&o++},r=function(e){e.target===this&&0==--o&&(t.each(["$bg","$overlay","$wrapper","$modal"],(function(e,t){a[t].off(s+" "+d)})),n())};t.each(["$bg","$overlay","$wrapper","$modal"],(function(e,t){a[t].on(s,i).on(d,r)})),e(),0===b(a.$bg)&&0===b(a.$overlay)&&0===b(a.$wrapper)&&0===b(a.$modal)&&(t.each(["$bg","$overlay","$wrapper","$modal"],(function(e,t){a[t].off(s+" "+d)})),n())}function O(e){e.state!==p&&(t.each(["$bg","$overlay","$wrapper","$modal"],(function(t,n){e[n].off(s+" "+d)})),e.$bg.removeClass(e.settings.modifier),e.$overlay.removeClass(e.settings.modifier).hide(),e.$wrapper.hide(),y(),w(e,p,!0))}function x(){for(var e=r,t=0;t<arguments.length;++t)e+="-"+arguments[t];return e}function $(){var e,a,o=location.hash.replace("#","");if(o){try{a=t('[data-remodal-id="'+o+'"]')}catch(e){}a&&a.length&&(e=t.remodal.lookup[a.data(i)])&&e.settings.hashTracking&&e.open()}else n&&n.state===u&&n.settings.hashTracking&&n.close()}function D(e,n){var a=t(document.body),o=this;o.settings=t.extend({},c,n),o.index=t.remodal.lookup.push(o)-1,o.state=p,o.$overlay=t("."+x("overlay")),null!==o.settings.appendTo&&o.settings.appendTo.length&&(a=t(o.settings.appendTo)),o.$overlay.length||(o.$overlay=t("<div>").addClass(x("overlay")+" "+x("is",p)).hide(),a.append(o.$overlay)),o.$bg=t("."+x("bg")).addClass(x("is",p)),o.$modal=e.addClass(r+" "+x("is-initialized")+" "+o.settings.modifier+" "+x("is",p)).attr("tabindex","-1"),o.$wrapper=t("<div>").addClass(x("wrapper")+" "+o.settings.modifier+" "+x("is",p)).hide().append(o.$modal),a.append(o.$wrapper),o.$wrapper.on("click."+r,'[data-remodal-action="close"]',(function(e){e.preventDefault(),o.close()})),o.$wrapper.on("click."+r,'[data-remodal-action="cancel"]',(function(e){e.preventDefault(),o.$modal.trigger(h),o.settings.closeOnCancel&&o.close(h)})),o.$wrapper.on("click."+r,'[data-remodal-action="confirm"]',(function(e){e.preventDefault(),o.$modal.trigger(f),o.settings.closeOnConfirm&&o.close(f)})),o.$wrapper.on("click."+r,(function(e){t(e.target).hasClass(x("wrapper"))&&o.settings.closeOnOutsideClick&&o.close()}))}D.prototype.open=function(){var e,o=this;o.state!==m&&o.state!==l&&((e=o.$modal.attr("data-remodal-id"))&&o.settings.hashTracking&&(a=t(window).scrollTop(),location.hash=e),n&&n!==o&&O(n),n=o,function(){if(!v){var e,n,a=t("html"),o=x("is-locked");a.hasClass(o)||(n=t(document.body),e=parseInt(n.css("padding-right"),10)+k(),n.css("padding-right",e+"px"),a.addClass(o))}}(),o.$bg.addClass(o.settings.modifier),o.$overlay.addClass(o.settings.modifier).show(),o.$wrapper.show().scrollTop(0),o.$modal.focus(),C((function(){w(o,m)}),(function(){w(o,u)}),o))},D.prototype.close=function(e){var n=this;n.state!==m&&n.state!==l&&n.state!==p&&(n.settings.hashTracking&&n.$modal.attr("data-remodal-id")===location.hash.substr(1)&&(location.hash="",t(window).scrollTop(a)),C((function(){w(n,l,!1,e)}),(function(){n.$bg.removeClass(n.settings.modifier),n.$overlay.removeClass(n.settings.modifier).hide(),n.$wrapper.hide(),y(),w(n,p,!1,e)}),n))},D.prototype.getState=function(){return this.state},D.prototype.destroy=function(){var e=t.remodal.lookup;O(this),this.$wrapper.remove(),delete e[this.index],0===t.grep(e,(function(e){return!!e})).length&&(this.$overlay.remove(),this.$bg.removeClass(x("is",l)+" "+x("is",m)+" "+x("is",p)+" "+x("is",u)))},t.remodal={lookup:[]},t.fn.remodal=function(e){var n,a;return this.each((function(o,r){null==(a=t(r)).data(i)?(n=new D(a,e),a.data(i,n.index),n.settings.hashTracking&&a.attr("data-remodal-id")===location.hash.substr(1)&&n.open()):n=t.remodal.lookup[a.data(i)]})),n},t(document).ready((function(){t(document).on("click","[data-remodal-target]",(function(e){e.preventDefault();var n=e.currentTarget.getAttribute("data-remodal-target"),a=t('[data-remodal-id="'+n+'"]');t.remodal.lookup[a.data(i)].open()})),t(document).find("."+r).each((function(e,n){var a=t(n),o=a.data("remodal-options");o?("string"==typeof o||o instanceof String)&&(o=function(e){var t,n,a,o,i={};for(o=0,n=(t=(e=e.replace(/\s*:\s*/g,":").replace(/\s*,\s*/g,",")).split(",")).length;o<n;o++)t[o]=t[o].split(":"),("string"==typeof(a=t[o][1])||a instanceof String)&&(a="true"===a||"false"!==a&&a),("string"==typeof a||a instanceof String)&&(a=isNaN(a)?a:+a),i[t[o][0]]=a;return i}(o)):o={},a.remodal(o)})),t(document).on("keydown."+r,(function(e){n&&n.settings.closeOnEscape&&n.state===u&&27===e.keyCode&&n.close()})),t(window).on("hashchange."+r,$)}))}(i,e)}.apply(t,a),void 0===o||(e.exports=o)},73:e=>{"use strict";e.exports=window.jQuery}},t={};function n(a){var o=t[a];if(void 0!==o)return o.exports;var i=t[a]={exports:{}};return e[a].call(i.exports,i,i.exports,n),i.exports}(()=>{"use strict";var e=n(73);n(856),n(630);const t=window.jQuery;class a{constructor(e,n){this.settings=t.extend({modalContainer:"order-tracking-popup",loading:"",modal:null,modalOptions:{hashTracking:!1,closeOnOutsideClick:!1}},e),this.load(n)}load(e){var n=this;return t("body").append('<div class="remodal" id="'+n.settings.modalContainer+'" data-remodal-id="'+n.settings.modalContainer+'"><img src="'+n.settings.loading+'"</div>'),this.settings.modal=t("[data-remodal-id="+n.settings.modalContainer+"]").remodal(n.settings.modalOptions),t(document).on("closed","",(function(){n.settings.modal.destroy(),"function"==typeof e&&e()})),this}setHtml(e){t("#"+this.settings.modalContainer).html(e)}open(){this.settings.modal.open()}close(){this.settings.modal.close()}}var o={sdfOrderData:{},load:null,editModal:null,init:function(){this.sdfOrderData=window.sdfOrderData,this.initCheckBox(),this.checkbox(),this.bindEvt()},bindEvt:function(){var t=this;e(document).on("click","[data-remodal-action=confirm]",t.printLabel.bind(t)),e(document).on("click","#create-order-botton",t.createOrder.bind(t)),e(document).on("click","#export-order-botton",t.printOrder.bind(t)),e(document).on("click","#submit-edit-sender-form",t.editSender.bind(t)),e(document).on("click",".print-label-row",t.printRowLabel.bind(this)),e(document).on("click","#edit_sender_popup",(function(){t.editModal=e("[data-remodal-id=edit-sender-modal]").remodal(),t.editModal.open()}))},printRowLabel:function(t){var n=e(t.target).attr("data-stack-id");if(""===n)return!1;window.sdfOrderData;var a={labelType:1,billID:n};this.ajaxRequest(this.sdfOrderData.printLabel,a)},checkbox:function(){e("#checked-spf").on("click",(function(){var t=e(this).is(":checked");e('.tab-content-wrapper tbody .el-checkbox input[type="checkbox"]').each((function(n,a){e(a).get(0).checked=t}))}))},initCheckBox:function(){try{e('.tab-content-wrapper .el-checkbox tbody input[type="checkbox"]').each((function(t,n){if(!e(n).is(":checked"))throw new Error("check all checked")}))}catch(e){return}e("#checked-spf").get(0).checked=!0},editSender:function(t){t.preventDefault(),t.stopPropagation(),e(t.target);var n=this,a={},o=e("#edit-form").serializeArray();try{e.each(o,(function(t,o){switch(o.name){case"woocommerce_store_address":case"woocommerce_store_city":case"woocommerce_default_country":case'"woocommerce_store_postcode"':case'"spf_speedaf_name"':case"spf_speedaf_phone":if(0===o.value.length)throw new Error(n.sdfOrderData.please_enter+e("[name="+o.name+"]").prev().text())}a[o.name]=o.value}))}catch(e){return void n.error(e)}this.ajaxRequest(this.sdfOrderData.editSender,a,"")},getBoxId:function(){var t=[];return e('.tab-content-wrapper tbody input[type="checkbox"]').each((function(n,a){e(a).is(":checked")&&t.push(e(a).val())})),t},createOrder:function(t){var n={title:"Tips",btn:parseInt("0011",2),cancelBtn:this.sdfOrderData.cancelBtn,okBtn:this.sdfOrderData.okBtn,onOk:function(){var t=this.getBoxId(),n=e("#order-body-form").serializeArray();if(0!==t.length){var o={ids:n};this.load=new a({loading:self.sdfOrderData.loading,modalContainer:"create-order-loading"}),this.load.open(),this.ajaxRequest(this.sdfOrderData.createOrder,o,e("#create-order-botton"))}else this.error(this.sdfOrderData.select_ids)}.bind(this)};e.confirm("<div style='font-size:1.5rem;color:red;'>"+this.sdfOrderData.createMsg+"</div>","confirm",n)},ajaxRequest:function(t,n,a){var o=this,i={action:this.sdfOrderData.action,_ajax_nonce:this.sdfOrderData.nonce};Object.assign(n,i),e.post(this.sdfOrderData.ajax_url+"?type="+t,n,(function(n){if("object"==typeof a&&a.removeAttr("disabled"),n.success)switch(t){case o.sdfOrderData.createOrder:o.load.setHtml(n.data.confirm_html),e("#order_html_content").html(n.data.order_html),o.initCheckBox();break;case o.sdfOrderData.printLabel:n.data.label_url.length>0&&window.open(n.data.label_url+"?response-content-type=application/pdf");break;case o.sdfOrderData.editSender:e("#edit_sender_popup").attr("disabled","disabled"),o.editModal&&(o.editModal.close(),o.editModal.destroy()),e(".remodal-wrapper").css("display","none"),o.error(o.sdfOrderData.edit_note,"success");break;case o.sdfOrderData.printOrder:var i=document.createElement("iframe");i.style="display: none;",document.body.appendChild(i);var r=i.contentDocument||i.contentWindow.document;r.open(),r.write(n.data.print_html),r.close(),i.contentWindow.print(),i.contentWindow.addEventListener("afterprint",o.destroyIframe)}else console.log(o.log),o.load&&o.load.close(),o.error(n.msg)}))},error:function(t,n){void 0===n&&(n="error"),e.confirm(t,n)},printLabel:function(t){var n=e("#print-label-type").find('input[type="radio"]:checked');if(0===n.length)return!1;var a=window.sdfOrderData,o={action:a.action,_ajax_nonce:a.nonce,labelType:n.val(),ids:this.getBoxId()};this.ajaxRequest(this.sdfOrderData.printLabel,o)},printOrder:function(){var e={action:self.sdfOrderData.printOrder,ids:this.getBoxId()};this.destroyIframe(),this.ajaxRequest(this.sdfOrderData.printOrder,e)},destroyIframe:function(){try{for(var e=document.querySelectorAll("iframe"),t=0;t<e.length;t++)e[t].parentNode.removeChild(e[t])}catch(e){console.log(e)}}};e((function(){o.init()}))})()})();